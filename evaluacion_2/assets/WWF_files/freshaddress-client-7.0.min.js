(function(){var t,n;n="undefined"!=typeof exports&&null!==exports?exports:this,t={_config:{},_options:{},_special_options:{service:"react",format:"json",jsoncallback:"?"},_cache:{}},t.init=function(t,n){var i,e,o;this._config.protocol="https",this._config.origin="rt.freshaddress.biz",this._config.endpoint="v7",this._config.dataType="jsonp",this._config.method="GET",this._config.scriptCharset="utf-8",this._config.contentType="application/json; charset=utf-8",this._config.timeout=3e3,this._config.cacheEnabled=!0;for(i in t)e=t[i],this._config[i]=e;this._options.token=this._tryFindToken(),this._options.rtc_timeout="2000";for(i in n)e=n[i],this._options[i]=e;o=this._special_options;for(i in o)e=o[i],this._options[i]=e;return!0},t.resetCache=function(){return this._cache={},!0},t.validateEmail=function(t,n,i){var e,o;return o=n,e=i,!i&&n&&n instanceof Function&&(o=null,e=n),this._performCallValidateEmail(t,e,this._makeUrl(t,o),this._makeSettings(),this._friendlyTransform)},t.callValidateEmail=function(t,n,i){var e,o;return o=n,e=i,!i&&n&&n instanceof Function&&(o=null,e=n),this._performCallValidateEmail(t,e,this._makeUrl(t,o),this._makeSettings(),this._identityTransform)},t._identityTransform=function(t){return t},t._friendlyTransform=function(t){var n;return n=function(t){return null===t||""===t},{getResponse:function(){return t},getFinding:function(){return t.FINDING},getComment:function(){return t.COMMENT},getCommentCode:function(){return t.COMMENT_CODE},getSuggComment:function(){return t.SUGG_COMMENT},getSuggEmail:function(){return t.SUGG_EMAIL},getUUID:function(){return t.UUID},getErrorResponse:function(){return t.ERROR_RESPONSE},getServiceError:function(){return t.ERROR},isValid:function(){return"V"===t.FINDING||"VS"===t.finding},isSafeToSend:function(){return"VS"===t.FINDING},isError:function(){return"E"===t.FINDING},isWarning:function(){return"W"===t.FINDING},isOverride:function(){return"customer override"===t.COMMENT},hasSuggest:function(){return!n(t.SUGG_EMAIL)},isServiceError:function(){return!n(t.ERROR)},isCachedResponse:function(){return t.CACHED_ATTEMPT_NUMBER>1},getCachedAttemptNumber:function(){return t.CACHED_ATTEMPT_NUMBER}}},t._makeUrl=function(t,n){var i,e,o;n||(n={}),o=""+this._config.protocol+"://"+this._config.origin+"/"+this._config.endpoint,e="?";for(i in this._special_options)e+="jsoncallback"!==i?i+"="+encodeURIComponent(this._special_options[i])+"&":i+"="+this._special_options[i]+"&";for(i in this._options)this._special_options[i]||n[i]||(e+=i+"="+encodeURIComponent(this._options[i])+"&");for(i in n)this._special_options[i]||(e+=i+"="+encodeURIComponent(n[i])+"&");return e+="email="+encodeURIComponent(t),o+e},t._makeSettings=function(){var t;return t={},t.crossDomain=!0,t.dataType=this._config.dataType,t.type=this._config.method,t.scriptCharset=this._config.scriptCharset,t.contentType=this._config.contentType,t.timeout=this._config.timeout,t},t._tryFindToken=function(){var t,n,i,e,o;return i=$("script"),e=null,i.each(function(t,n){var i,o;return(null!=(i=n.src)?i.match("freshaddress-client"):void 0)&&(null!=(o=n.src)?o.match("token="):void 0)?(e=n,!1):void 0}),e&&(n=e.src.split("?"),2===(null!=n?n.length:void 0))?(t=n[1].split("&"),o=null,t.forEach(function(t){var n;return n=t.split("="),2===n.length&&"token"===n[0]?(o=n[1],!1):void 0}),o):void 0},t._performCallValidateEmail=function(t,n,i,e,o){var r,s,c,a,u,f,_,h,l,p;if(s={t1:(new Date).getTime()},this._config.cacheEnabled&&this._cache[t]){r=$.Deferred(),this._cache[t].response.CACHED_ATTEMPT_NUMBER+=1,f={},p=this._cache[t].response;for(a in p)l=p[a],f[a]=l;return h=o(f,s),r.resolve(h),n&&n(h),r.promise()}return u=$.ajax(i,e),_=this,c=$.Deferred(),u.then(function(i){var e;if(s.t2||(s.t2=(new Date).getTime()),i.CLIENTTIME=s.t2-s.t1,_._config.cacheEnabled&&!_._cache[t]&&!i.ERROR){e={};for(a in i)l=i[a],e[a]=l;e.CACHED_ATTEMPT_NUMBER=1,i.CACHED_ATTEMPT_NUMBER=e.CACHED_ATTEMPT_NUMBER,_._cache[t]={response:e}}return h=o(i,s),c.resolve(h),n?n(h):void 0}),u.fail(function(t){return s.t2||(s.t2=(new Date).getTime()),h=o(t,s),c.reject(h),n?n(h):void 0}),c.promise()},t.init(),n.FreshAddress=t}).call(this);